{% extends 'base.html' %}
{% block main_content %}
<div class="navbar-fixed z-depth-2" style="background-color: #9EC4D5; width: 100%; height: 270px; position: fixed; z-index: 1; background-image: url(static/images/background_img.png); background-position: 50% 10%; background-size: 70% auto; background-repeat: no-repeat">
   <nav class="nav-wrapper transparent z-depth-0" style="padding-left: 10px; padding-top: 10px; padding-right: 10px">
      <ul id="nav-bar">
         <a href="/">
            <div class="left">
               <p style="color: #333; font-size: 24px; font-weight: 700; display: inline">KOOL</p>
               <p style="color: #333; font-size: 24px; display: inline"> - Find competent scientists</p>
            </div>
         </a>
         <a href="/admin_page/">
            <div class="right">
               <p style="color: #333; font-size: 14px; display: inline">ADMIN PAGE</p>
            </div>
         </a>
      </ul>
   </nav>
</div>
<div class="row" style="margin-top: 80px; width: 97%; position: relative; z-index: 2">
<div class="container">
   <div class="nav-wrapper white z-depth-4 roundedcorners" style="top: 140px; left: 25%; position: absolute; width: 50%; height: 100px; border: 1px black; border-style: solid; align-items: center; display: flex; border-radius: 10px">
      
   
      <div class="switch" title="Switch is currently: OFF" style="position: relative; padding-left: 5%; z-index: 2;">
         <label>
            <input id="searchcheckbox" type="checkbox" onchange="switchflipped()">
            <span class="lever"></span>
         </label>
      </div>
      
      
      
      <form id="searchbar" style="flex: 100; margin-left: -10%;" autocomplete="off" method="get" action="/results">
         
         <div class="input-field" style="position: relative" onchange="success()">
            {% comment %} list="list-competency" zu input {% endcomment %}
            <input name="q" placeholder="Search Competency" id="search-input"
                              id="auto" type="text" class="autocomplete" 
                              style="width: 65%; margin: 0;font-size:30px">

            <label for="auto" class="label-icon" for="search" style="left: auto; right: 0; width: auto, margin-left: 0; margin-right: 5%; margin-top:0%", type="submit", name="action">
            <button class="transparent" id="searchbutton" disabled style="border: none" type="submit">
            <i class="material-icons">search</i>
            </button>
            </label>
         </div>
         
      </form>
   </div>
</div>







{% comment %} popular comp mit show all button und vier bl√∂cken mit popular comp und show scientists button {% endcomment %}
<div class="container" style="margin-top: 280px;">
<div style="align: central">
   <div id="showcomp" align="left">
      <h3> Popular competencies<button id="showallbutton" onclick="location.href=/category/">
         <span class="black-text
            text-darken-2">
            show all
         </span> 
      </button>

      </h3>
   </div>
</div>
   <div class="row">
      <div class="col s1 m3">
         <div class="card blue-grey">
            <div class="card-content white-text">
               <span class="card-title">Machine Learning</span>
               <p>Machine learning is a method of teaching computers to learn from data, without being explicitly programmed.</p>
            </div>
            <div class="card-action">
               <a href="/results/?q=machine+learning"><span class="white-text text-darken-2">Search Scientists</span></a>
            </div>
         </div>
      </div>
      <div class="col s1 m3">
         <div class="card blue-grey">
            <div class="card-content white-text">
               <span class="card-title">Maxwell Equations</span>
               <p>The Maxwell equations are a set equations that describe the behavior of electric and magnetic fields.</p>
            </div>
            <div class="card-action">
               <a href="/results/?q=maxwell+equations"><span class="white-text text-darken-2">Search Scientists</span></a>
            </div>
         </div>
      </div>
      <div class="col s1 m3">
         <div class="card blue-grey">
            <div class="card-content white-text">
               <span class="card-title">Convergence Analysis</span>
               <p>Convergence analysis evaluates the rate of change of a sequence to a limit/solution as the number of iterations increases.</p>
            </div>
            <div class="card-action">
               <a href="/results/?q=convergence+analysis"><span class="white-text text-darken-2">Search Scientists</span></a>
            </div>
         </div>
      </div>
      <div class="col s1 m3">
         <div class="card blue-grey">
            <div class="card-content white-text">
               <span class="card-title">Renewable Energy</span>
               <p>Renewable energy refers to energy sources that are replenished naturally and can be used indefinitely.</p>
            </div>
            <div class="card-action">
               <a href="/results/?q=renewable+energy"><span class="white-text text-darken-2">Search Scientists</span></a>
            </div>
         </div>
      </div>
   </div>
   {% comment %} untere Navbar mit Aboutkool, privacy und imprint {% endcomment %}
   <br><br><br><br><br><br><br><br><br><br><br><br><br><br>
   <div class="row" id="bottomDiv">
      <nav>
         <div class="nav-wrapper white">
            <ul class="left hide-on-med-and-down">
               <li><a href="about_kool/"><span class="black-text text-darken-2"><u>About Kool</u></span></a></li>
               <li><a href=""><span class="black-text text-darken-2"><u>Privacy</u></span></a></li>
               <li><a href=""><span class="black-text text-darken-2"><u>Imprint</u></span></a></li>
            </ul>
         </div>
      </nav>
   </div>
</div>



<script>
   
   document.addEventListener('DOMContentLoaded', eventCompetency());

   function eventResearcher(){
      var dict = JSON.parse('{{all_authors|escapejs}}');
      var elems = document.querySelectorAll('.autocomplete');
      options = {
      data: {},limit: 10, onAutocomplete: function(selectedValue) {
         document.getElementById("searchbar").submit();
         }
      }
      for (var key in dict){
         options.data[dict[key][1] + " " + dict[key][2]] = null
      }
      var instances = M.Autocomplete.init(elems, options);
   }

   function eventCompetency() {
      var dict = JSON.parse('{{all_competencies|escapejs}}');
      var elems = document.querySelectorAll('.autocomplete');
      options = {
      data: {},limit: 10, onAutocomplete: function(selectedValue) {
         document.getElementById("searchbar").submit();
         }
      }
      for (var key in dict){
         options.data[dict[key][1]] = null
      }
      var instances = M.Autocomplete.init(elems, options);
   }

   



   function switchflipped() { 
      if(document.getElementById("searchcheckbox").checked) {
         document.getElementById("search-input").placeholder = "Search Researcher"

         document.removeEventListener('DOMContentLoaded', eventCompetency());
         document.addEventListener('DOMContentLoaded', eventResearcher());




      } else{
         document.getElementById("search-input").placeholder = "Search Competency";

         document.removeEventListener('DOMContentLoaded', eventResearcher());
         document.addEventListener('DOMContentLoaded', eventCompetency());
         

         {% comment %} TODO remove event listener and add old one {% endcomment %}


      }
   }


   function success() {
       if(document.getElementById("search-input").value=="") { 
              document.getElementById('searchbutton').disabled = true; 
          } else { 
              document.getElementById('searchbutton').disabled = false;
          }
      }
</script>
{% endblock %}